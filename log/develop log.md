catkin_make -DCATKIN_WHITELIST_PACKAGES="campus_driving"
起点问题
找到倒车车速控制失败原因：
  倒车时加速度应该反向。
20180303
将坐标系更改为右手坐标系，与SAE CARSIM ISO保持一致：
    全局：x:east y:north z:up
    车辆：x:纵轴朝前　y:向左　z：向上
20180211 张驰 唐陆奇
速度、预瞄曲率适应问题：
    1 相位滞后，基本是快出弯的时候才反应，出弯很久才退出
    2 大曲率标志频繁振荡
速度控制问题：
	1 体育场上坡处，速度往上超调很大，设定15,达到22.而且有时候已经稳定到15了，还是会突然莫名加速到22才减速；
	2 起步会出现很大超调，可能原因是先挂D档，然后模式切换打开，直接走。这导致模式切换开启前无档位信号

配置文件：
    param.yaml： 主要设置地图名，地图生成类型；
    setCalibParam.py： 控制标定参数；
    vehicle_model.py： 车辆型号，是否局部路径规划locPlan，AEBenable
20171229
算法及兼容性优化
1 可兼容两种车型，只需修改车型号和地图即可, STOP_SAFE,setCalibParam拷贝,转向控制中的参数
2 跟踪算法巨大优化
    1 跟踪偏差计算不能在车载坐标系进行，需在全局坐标系完成。因为经坐标转换后，角度距离已经变了以及sPre不能在车载坐标系的y求得，
      否则在转弯时预瞄点本应指向前方，却反倒向后方移动，导致转向过度，很久才开始回正。
    2 工程车航向必须要修正，否则转弯越大，问题越突出。施加一个转向角后，偏差事实上已经减少了，若未修正，则算法计算的偏差还在增大，导致继续转向，严重超调，方向回不过来。

3 还需检查之前车载坐标系下的障碍物检测算法是否有误
底层核心错误
1 steer偏差计算坐标系统
2 localplanning中点到直线距离计算错误(未考虑初始化无定位情况，已修改）
3 障碍物检测坐标系统是否有误
4 分析转弯时动态
5 分析最后一把转向过小是多小
6 如何检测换道
7 添加积分
8  if True:

模糊控制
1 单独使用纯跟踪调试至不超调临界
2 查看上一步运行时的eta,eta_delta
3 根据2，设置模糊控制相关变量论域

PID调试经验
1 预瞄距离如上一次更正所示
2 先只采用位置偏差P控制，调制无超调稳态
3 再采用航向偏差P控制，继续优化无超调稳态。2,3是否加权求和一起调，待定。
4 还未添加积分控制，分区间PID未调试好
5 目前直线跟踪误差可保证能控制在30cm,主要缺陷体现在换道大偏差的情况，除了分区PID，是否尝试基于运动学模型。

尝试改进方案
1 根据纯滞后时间*车速，计算预瞄距离，具备理论依据。A60纯滞后时间0.2s，惯性环节时间常数2s。（更正：通过测试发现不能只用纯滞后时间，即 近似 预瞄距离=（惯性时间+纯滞后时间）* V
2 取消bezier拟合的localPlanning，直接采用偏差反馈跟踪全局路径，但是仍然保留了根据bezier预估的局部路径进行避障判断
3 不采用bezier拟合局部曲线了，相应的转向控制偏差计算方法需要更改。结果位置偏差方法不变，航向偏差由直接求原点导数改为PreScan方式。现在想来PreScan方式更合理。
  不过后续未采用PreScan对偏差加权求和的方式，而是对位置和航向偏差分别采用PI和PD控制
4 优化删除了steer_control.py中后退控制的函数
5 初步总结了当前问题，形成了文档“跟踪进度提高方案.docx”

新版移植
1 修改vehicle_model.py的车型
2 地图初始化加载
3 STOP_SAFE
驾校移植
1 接收数据 localplanning(note azimuth) display steer_control
2 sensordriver增加，且改Float32 --> CAN_ID4
3 localplanning中增加速度规划和相应pub
4 地图初始化加载
5 mapEndPointDraw适配CPT格式
6 CPT增加航向变换
7 steer_control.py 1 gainA60toCSD; 2 回差
8 localplanning中修改shift交互语句，can_read

20171209
--> package backup --> campus_driving1209回校
遗留的问题：
1 跟踪精度不高，肉眼可见至少大于+-50cm
    原因分析：
    1 预瞄方式不合理，采用贝塞尔拟合，虽然更平滑，但是客观上导致了在求解偏差这一环节就存在问题

2 保存log数据有误，只保存了几个点
    原因分析：
    1 保存数据代码逻辑有问题 (修改代码完成)

3 前进后退切换的时候，总是无意义转向
    原因分析：
    1 是不是在底层动作未完成前就将地图或航向旋转了180° (修改代码完成)

4 到全程终点时，地图不应该按其他线路一样，切换到前进，而是要保持当前后退路线
    原因分析:
    1 目前的代码只考虑了“走完全程停车，则不必变换方向”，但是地图也不应该变，否则出错 (修改代码完成)
